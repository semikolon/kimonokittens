// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") // The connection URL will be provided later
}

model Tenant {
  id             String      @id @default(cuid())
  name           String
  email          String      @unique
  facebookId     String?     @unique
  avatarUrl      String?
  roomAdjustment Float?
  startDate      DateTime?   // Add the missing start date
  departureDate  DateTime?
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  coOwnedItems   CoOwnedItem[] @relation("ItemOwners")

  rentLedger     RentLedger[]
}

model CoOwnedItem {
  id           String   @id @default(cuid())
  name         String
  description  String?
  purchaseDate DateTime
  value        Float // Original value in SEK
  owners       Tenant[] @relation("ItemOwners")
}

model RentLedger {
  id          String   @id @default(cuid())
  tenantId    String
  tenant      Tenant   @relation(fields: [tenantId], references: [id])
  period      DateTime // e.g., 2025-01-01 for Jan 2025 (rent period, not config period)
  amountDue   Float    // Amount calculated for this tenant/period
  amountPaid  Float    // Amount actually paid (may differ from amountDue)
  paymentDate DateTime? // When payment was received
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model RentConfig {
  id        String   @id @default(cuid())
  key       String   @unique
  value     String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  period    DateTime @default(now())
}

 